platform: ubuntu
#language: java8
language: xcode7

env:
  - Hello=WORLD
  - Bye=Blah

build:
  script:
    - echo "Before building..."
    - echo "hello world"
    - echo "Done!"

  maven:
    pom: some/project/pom.xml
    lifecycle: clean install
    skipTests: true
    skipMoveHistoric: false
    checkstyle.skip: true
    client.version=: ${VERSION}
    app.version: ${APP_VERSION}
    maven.repo.local: $PWD/.repository
    opts: -P ${MVN_PROFILE} -s ${MVN_SETTINGS} -T 4 -B -U

  xcode:
    project: some_project
    scheme: some_scheme
  npm: start

publish:
  - branch:
      name: ING_PRE_DG
      maven:
        file: target/dev-java.jar
        id: something
        group: es.bank.ing
        packaging: zip
  - maven:
      file: target/java.jar
      id: something
      group: es.bank.ing
      packaging: zip
  - npm:
      registry: https://registry.npmjs.org
      scope: '@somescope'
      files:
        - '*.py'
        - 'hello.py'

deploy:
    script:
      - scp something user@remote_host:/deploy_dir/something
      - ssh user@remote_host "run_deploy.sh /deploy_dir/something"
    ansible: deploy_FRONT.yml

test:
  script:
    - echo "Should be testing something..."
